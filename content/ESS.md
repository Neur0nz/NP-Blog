---
title: הכל כיף ומשחקים עד שיש מוטציה
cssclasses:
  - rtl-class
draft: false
tags:
  - Game_Theory
  - Nadav_Perry
author: נדב פרי
---
### הערות

1. זה הפוסט הראשון שלי וניסיתי לכתוב אותו מהר כי אני עסוק אז יש פה דברים לא מושלמים שבתקווה אתקן בעתיד, לעומת זאת אני אני חושב שהפוסט במצב שכבר בסדר לפרסמו.
2. ברור שרשתות חברתיות לא באמת עובדות בדיוק כמו שאני מתאר פה, אני מפשט לצורך הדוגמא.
3. למדתי את הנושא ולקחתי דוגמאות מסויימות עם שינויים דרך הספר "תורת המשחקים" של שמואל זמיר, מיכאל משלר ואלון סולן אז תודה וקרדיט להם.
## 🐈 האומן והגנב
ברשתות חברתיות כמו פייסבוק, טוויוטר, אינסטרגם וכו', יש שני סוגים של יוצרי תוכן ה-"_אומנים_" שמשקיעים זמן ויוצרים תוכן מקורי ואיכותי, וה-"_גנבים_" שלוקחים תוכן שמישהו יצר ברגע שהוא העלה אותו, משנים טיפה את הכותרת לכותרת יותר מושכת ומעלים את זה, ובכך גונבים את כל הצפיות של היוצר הראשון.
לשם הפשטות נסתכל על אינטרקציה ספציפית בין שני משתמשים, אם שניהם אומנים כל אחד יוצר את התוכן שלו ושניהם מקבלים כמות צפיות בסדר ביחס לכמות הזמן שלקח להם לכתוב את הפוסט שלהם נניח $4$ (ביחידות מומצאות של כמות לזמן השקעה), אם משתמש אחד גנב והשני אומן, הגנב בקושי השקיע ומשיג כמות יחסית גדולה של צפיות בנוסף הוא הורס לאומן שגנב ממנו שהשקיע כמות זמן גדולה והרבה מהצפיות שלו נגנבו על ידי הגנב, נניח $8$ צ"ל (צפיות לזמן) לגנב ו $2$ צ"ל לאומן.
לבסוף אם גנב פוגש גנב לאף אחד מהם לא ילך טוב, הם יקבלו טיפה צפיות אבל הם פשוט גונבים אחד מהשני כל הזמן בלי ליצור תוכן חדש ולכן כל אחד מהם יקבל צ"ל יחיד. (בהמשך הפוסט פשוט אגיד "נקודות" במקום צפיות לזמן, מטעמי נוחות)
להלן מטריצה שמייצגת את האינטרקציות שתיארתי:
$$
\begin{pmatrix} \text{ןמוא} & \text{בנג} & \star\\
\left(4,4\right) & \left(2,8\right) & \text{ןמוא}\\
\left(8,2\right) & \left(1,1\right) & \text{בנג}
\end{pmatrix}
$$
הערה: אם כל המשתמשים גונבים אז נהיה שווה (לא בהרבה אבל שווה) להיות אומן ואם כולם אומנים אז נהיה מאוד שווה לגנוב תוכן.
### 💫אנשים הם מורכבים
משתמש לא חייב תמיד לגנוב תוכן או תמיד ליצור תוכן חדש, הוא יכול להיות משהו בן לבין, בכדי לתאר את זה, נתאר כל משתמש בעזרת הסתברות $0\leq x\leq1$ כאשר $x$ זו ההסתברות של משתמש ליצור תוכן בהיתקלות עם משתמש אחר ולכן ההסתברות שלו לגנוב היא $1-x$.
בנוסף נסתכל על המצב הנוכחי ברשת כלומר נגדיר שהמצב ברשת הוא כזה שב-"היתקלות" עם משתמש יש לו סיכוי $0\leq y\leq1$ להתנהג כמו אומן ו $1-y$ להתנהג כמו גנב.
### ⭐השאלה המתבקשת
אם המצב הזה קורה במציאות האם אחרי כמות זמן מסויימת נגיע לשיווי משקל כלשהו שבו ההסתברות להיתקל באומן היא $y^*$ ויש אסטרטגיה אופטימלית של המשתמשים שכולם עושים, כלומר __כל__ משתמש יוצר $x^*$ מהזמן וגונב בשאר.
מסתבר שאפשר לענות על השאלה הזו בצורה מאוד טובה בעזרת מושג שנקרא "אסטרטגיה יציבה אבולוציונית" (evolutionarily stable strategy, ESS) המושג הזה מגיע מתחום נחמד במתמטיקה שימושית שנקרא "תורת המשחקים", לאסטרטגיות יציבות אבולציונית יש שימושים מפתיעים בכלכלה, אקולוגיה התנהגותית ומדעי המדינה!
אבל לדעתי מספיק להסתכל על זה פשוט בשביל המתמטיקה הקלילה והנחמדה.
## 💥התחלת הפתרון
נניח שמשתמש חדש נרשם לאתר וצריך להחליט באיזה אסטרטגיה הוא עומד להשתמש (תחשבו על המשתמש בתור מוטציה של האוכלוסיה אם נוח לכם, זה לא חובה)
$$
\overset{\text{םימדוק םישמתשמ}}{\overbrace{\begin{pmatrix}\text{רצוי} & \text{בנג} & \star\\
\left(4,4\right) & \left(2,8\right) & \text{רצוי}\\
\left(8,2\right) & \left(1,1\right) & \text{בנג}
\end{pmatrix}}}\text{ םישדח םימשרנ}
$$
במצב שתיארנו משתמש שמשחק אסטרטגיה $x$ (כלומר הוא אומן $x$ מהזמן וגנב $1-x$ מהזמן) והמצב ברשת הוא כזה שנתקלים באסטרטגית האומן $y$ מהזמן וגנב $1-y$ מהזמן.
כדי למצוא את הנקודות שהמשתמש שלנו יקבל בממוצע נשים לב שאם הוא משחק אך ורק אומן ($x=1$) אז הוא יקבל בממוצע  $a=4y+2(1-y)$ שהרי $y$ מהזמן הוא יתקל באומן ושניהם יקבל $4$ ו $1-y$ מהזמן יתקל בגנב ויקבל $2$, מצד שני אם המשתמש משחק אומן ($x=0$) אז הוא יקבל $b=8\cdot y+1\cdot\left(1-y\right)$ ולכן כאשר המתמש משחק $x$ כלשהו הוא יקבל את $a$ $x$ מהזמן ואת $b$ $1-x$ מהזמן כלומר אם נסמן את הנקודות שהשמתמש מקבל ב $u(x,y)$ אז:
$$
u\left(x,y\right)=x\left(a\right)+\left(1-x\right)\left(b\right)
$$
כלומר:‎‎‎‎‎
$$

u\left(x,y\right)=x\left(4y+2\left(1-y\right)\right)+\left(1-x\right)\left(8y+\left(1-y\right)\right)
$$
בהמשך נקרא לפונקציה זו "פונקציית התשלום" שהרי היא מתארת כמה המשתמש מקבל.
אוקי, אז שמנו כמה משוואות על הלוח, איך פונקציית התשלום הזו תעזור לנו לבדוק מה יהיה שיווי המשקל הזה?
תחילה נעבור מלחשוב על $x$ בתור שחקן יחיד ונעבור לחשוב עליו בתור גל חדש (אבל קטן מאוד) של משתמשים חדשים שנרשמים לרשת החברתית שלנו ועושים את הבחירה שלהם של איזה אסטרטגיה ישחקו.
## 🎯שיווי המשקל
תחילה יעזור לנו למצוא משהו שנקרא שיווי משקל (או שיווי משקל נאש) שיווי משקל הוא מצב שבו גם המשתמשים החדשים וגם שאר המשתמשים לא יכולים לשפר את כמות הנקודות שהם מקבלים בעזרת שינוי האסטרטגיה, מבחינה מתמטית, $\left(x^{\ast},y^{\ast}\right)$ מהווה שיווי משקל אם __לכל__ זוג אסטרטגיות $x_{1},y_{1}$ (שונות מ $x^{\ast},y^{\ast}$) מתקיים:

$$
u\left(x_{1},y^{\ast}\right)\leq u\left(x^{\ast},y^{\ast}\right)

$$

כלומר לא שווה למשתמשים החדשים להחליף אסטרטגיה, וגם:

$$
u\left(x^{\ast},y_{1}\right)\leq u\left(x^{\ast},y^{\ast}\right)

$$
## 🐳מציאת שיווי המשקל ברשת שלנו
נתחיל מלפשט את פונקציית התשלום שלנו, כדי לא לשעמם אותכם למוות עם כמה חישובים של כיתה ז' אדלג ללאחר הפישוט
$$
u\left(x,y\right)=-5xy+x+7y+1
$$
נרשום מחדש בצורה הבא
$$
\displaylines{u\left(x,y\right)	=\left(1-5y\right)x+7y+1 \cr =5\left(\frac{1}{5}-y\right)x+7y+1}
$$
ברור לנו שלא יתכן שיהיה שיווי משקל שבו אחת הקבוצות או שתיהן משחקות אך ורק גנב או אך ורק אומן (כי אם כל האוכלוסיה עושה משהו אחד שווה לעבור לעשות משהו אחר ואז זה לא שיווי משקל) אבל אם $y\neq \frac{1}{5}$ או ש $\frac{1}{5} -y<0$ ואז המשתמשים החדשים יבחרו $x=0$ (רק גנב) כדי למקסם את כמות הנקודות שלהם או $\frac{1}{5} -y>0$ ואז המשתמשים החדשים יבחרו $x=1$ (רק אומן) ולכן הדרך היחידה שהמערכת תהיה בשיווי משקל היא $y=\frac{1}{5}$  אבל רגע רגע, זוכרים את המטריצה שמתארת את המצב שלנו?
$$
\begin{pmatrix} \text{ןמוא} & \text{בנג} & \star\\
\left(4,4\right) & \left(2,8\right) & \text{ןמוא}\\
\left(8,2\right) & \left(1,1\right) & \text{בנג}
\end{pmatrix}
$$
__המשחק סימטרי!__, מה זה אומר? שכמות הנקודות ששאר המשתמשים מקבלים (כלומר אלה שמשחקים $y$) נסמן את פונקציית התשלום שלהם $u_{2}(x,y)$ מקיימת $u\left(x,y\right)=u_{2}\left(y,x\right)$, במילים, ניתן לשנות את זהויות השחקנים מבלי לשנות את הרווח של האסטרטגיות שלהם.
ולכן מאותם שיקולים של לפני כמה שורות האסטרטגיה היחידה שהמשתמשים החדשים יכולים לשחק בשיווי משקל היא $x=\frac{1}{5}$ 

## 🧠 בעיה בשיווי המשקל
למרות ששיווי המשקל הוא רעיון מאוד שימושי הוא לא בהכרח עונה לבדו על השאלה שלנו, שימו לב לדוגמא הבאה, מהמשחק הפשוט ואהוב של אבן, נייר ומספריים, כאשר כל שחקן לשחק אבן נייר או מספריים או שילוב שלהם (כלומר חלק מהזמן מספריים בהסתברות מסויימת, חלק מהזמן נייר וחלק מהזמן אבן) שיווי המשקל **היחיד** במשחק הוא שכל אחד מהשחקנים משחק $\left( \frac{1}{3}, \frac{1}{3}, \frac{1}{3} \right)$ כלומר שליש מהזמן כל אחת מהאפשרויות. (ברור שאם אחד מהשחקנים יעדיף טיפה יותר אבן משאר האפשרויות השחקן השני פשוט תמיד יבחר נייר ואז בממוצע ינצח יותר) הבעיה היא שהאסטרטגיה הזו לא בדיוק יציבה כי יכול להגיע גל חדש קטן של שחקנים ולשחק רק אבן, שיביא אותה תוצאה כנגד שאר האנשים שמשחקים $\left( \frac{1}{3}, \frac{1}{3}, \frac{1}{3} \right)$, אבל השחקנים החדשים האלה יגרמו לאנשים לעבור לשחק יותר נייר מה שיגרום לאנשים לשחק יותר מספריים, ויווצר כמו מעין cycle של שינויים במה אנשים משחקים ( [משהו בסגנון כזה](https://www.youtube.com/watch?v=plOQ7n8VXNw)רק שאחרי שהכל מספריים יכולה לצוץ אבן יחידה ואז ממשיכים).
אז אם שיווי משקל לא מתאים לפתירת המצב שלנו איזה מושג כן מתאים?
## 🥳אסטרטגיה יציבה אבולוציונית
אסטרטגיה $x^*$  נקראת אסטרטגיה יציבה אבולוציונית אם לכל אסטרטגיה $x\neq x^*$ מתקיים אחד משני התנאים הבאים:
1. א $u\left(x,x^{\ast}\right)<u\left(x^{\ast},x^{\ast}\right)$
2. ב $u\left(x,x^{\ast}\right)=u\left(x^{\ast},x^{\ast}\right)$ וגם $u\left(x,x\right)<u\left(x^{\ast},x\right)$

האינטואיציה מאחורי ההגדרה היא שאסטרטגיה יציבה אבולוציונית אם אחד מהשניים מהתקיים
1. כל מוטציה שיכולה להיות תביא לתוצאות פחות טובות באינטרקציה עם המצב הנוכחי
2. המוטציה מקבלת אותן תוצאות כמו המצב הנוכחי אבל האינטרקציה של המוטציה עם עצמה מביאה פחות נקודות מהאינטרקציה של המוטציה עם המצב הנוכיח (כלומר הומטציה לא תתפשט כי תגדל טיפה ואז תתחיל להיתקל בעצמה ואז בממוצע היא מקבלת פחות ממה שהאסטרטגיה הדומיננטית מקבלת ולכן לא תשרוד).

## 😎סוף סוף
לאחר ה side quest הקצר הזה על ההבדל בין יציבות אבולוציונית לשיווי משקל נחזור לבעיה המקורית שלנו ונבדוק האם שיווי המשקל שמצאנו הוא אסטרטגיה יציבה אבולוציונית, שיווי המשקל שמצאנו ב [[ESS#🐳מציאת שיווי המשקל ברשת שלנו]]  הוא $\left( \frac{1}{5}, \frac{1}{5} \right)$, האם שיווי משקל זה גם יציב אבולוציונית?
התשוב היא כן, לפי התנאי השני:
לכל $x\neq \frac{1}{5}$ 
$$
u\left(x,\frac{1}{5}\right)=5\left(\frac{1}{5}-\frac{1}{5}\right)x+7\cdot\frac{1}{5}+1=\frac{7}{5}+1=u\left(\frac{1}{5},\frac{1}{5}\right)
$$
והכי חשוב, האי שיוויון $u\left(x,x\right)<u\left(x^{\ast},x\right)$ כלומר:
$$
\displaylines{5\left(\frac{1}{5}-x\right)x+\cancel{7x}+\cancel{1}&<5\left(\frac{1}{5}-x\right)\frac{1}{5}+\cancel{7x}+\cancel{1} \cr x-5x^{2}<\frac{1}{5}-x \cr 0<\frac{1}{5}-2x+5x^{2} \cr 0<\left(5x-1\right)^{2}}
$$
וזה מתקיים לכל $x\neq\frac{1}{5}$ כלומר מתקיים התנאי השני שלנו ולכן האסטרטגיה יציבה אבולוציונית, יאי🎉!
לסיכום השאלה שלנו אכן יש מצב של שיווי משקל טבעי בין גנבים לאומנים והוא שכל משתמש יגנוב $\frac{4}{5}$ ויצור דברים חדשים $\frac{1}{5}$ מהזמן.

---
### כמה הערות על הקשרים בין יציבות אבולוציונית לשיווי משקל נאש כדי לתת לכם טיפה תיאבון (ללא הוכחה)
1. במשחק סימטרי של שני שחקנים (כמו שהיה לנו פה) אם $x^*$ יציבה אבולוציונית אז $(x^*,x^*)$ שיווי משקל נאש.
2. משפט חשוב בתורת המשחקים (אולי אעשה עליו פוסט בעתיד) נקרא [משפט נאש](https://he.wikipedia.org/wiki/%D7%9E%D7%A9%D7%A4%D7%98_%D7%A0%D7%90%D7%A9) מבטיח קיום של שיווי משקל במה שנקרא אסרטגיות מעורבות, כלומר כאשר אפשר לבחור אסטרטגיות בהסתברויות כלשהן (כמו שעשינו פה) לעומת זאת לא בכל משחק יש אסטרטגיה יציבה אבולוציונית.
